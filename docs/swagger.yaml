basePath: /
definitions:
  models.Cart:
    properties:
      created_at:
        type: string
      id:
        type: integer
      product_id:
        type: integer
      quantity:
        type: integer
      size_id:
        type: integer
      updated_at:
        type: string
      user_id:
        type: integer
      variant_id:
        type: integer
    type: object
  models.CartItemResponse:
    properties:
      base_price:
        type: number
      image:
        type: string
      product_id:
        type: integer
      quantity:
        type: integer
      size:
        type: string
      subtotal:
        type: number
      title:
        type: string
      variant:
        type: string
    type: object
  models.CategoryProduct:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  models.ForgotPasswordRequest:
    properties:
      email:
        type: string
    required:
    - email
    type: object
  models.HistoryDetail:
    properties:
      created_at:
        type: string
      cust_address:
        type: string
      cust_email:
        type: string
      cust_name:
        type: string
      cust_phone:
        type: string
      delivery_method:
        type: string
      id:
        type: integer
      invoice:
        type: string
      items:
        items:
          $ref: '#/definitions/models.TransactionItemDetail'
        type: array
      payment_method:
        type: string
      status:
        type: string
      total:
        type: number
    type: object
  models.OrderTransaction:
    properties:
      address:
        type: string
      created_at:
        type: string
      email:
        type: string
      fullname:
        type: string
      id:
        type: integer
      invoice_number:
        type: string
      items:
        items:
          $ref: '#/definitions/models.OrderTransactionItem'
        type: array
      payment_method_name:
        type: string
      phone:
        type: string
      shipping_name:
        type: string
      status:
        type: string
      total:
        type: number
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  models.OrderTransactionItem:
    properties:
      id:
        type: integer
      product_id:
        type: integer
      product_name:
        type: string
      quantity:
        type: integer
      size_id:
        type: integer
      size_name:
        type: string
      subtotal:
        type: number
      variant_id:
        type: integer
      variant_name:
        type: string
    type: object
  models.OrderTransactionRequest:
    properties:
      address:
        type: string
      email:
        type: string
      fullname:
        type: string
      payment_method_id:
        type: integer
      phone:
        type: string
      shipping_id:
        type: integer
      user_id:
        type: integer
    type: object
  models.ProductDetail:
    properties:
      base_price:
        type: number
      category_id:
        type: integer
      created_at:
        type: string
      description:
        type: string
      id:
        type: integer
      images:
        items:
          $ref: '#/definitions/models.ProductImage'
        type: array
      recommended:
        items:
          $ref: '#/definitions/models.RecommendedProductInfo'
        type: array
      sizes:
        items:
          $ref: '#/definitions/models.Size'
        type: array
      stock:
        type: integer
      title:
        type: string
      updated_at:
        type: string
      variant:
        $ref: '#/definitions/models.Variant'
    type: object
  models.ProductImage:
    properties:
      deleted_at:
        type: string
      image:
        type: string
      product_id:
        type: integer
      updated_at:
        type: string
    type: object
  models.ProductResponse:
    properties:
      base_price:
        type: number
      category:
        $ref: '#/definitions/models.CategoryProduct'
      created_at:
        type: string
      description:
        type: string
      id:
        type: integer
      images:
        items:
          $ref: '#/definitions/models.ProductImage'
        type: array
      sizes:
        items:
          $ref: '#/definitions/models.Size'
        type: array
      stock:
        type: integer
      title:
        type: string
      updated_at:
        type: string
      variants:
        items:
          $ref: '#/definitions/models.Variant'
        type: array
    type: object
  models.ProfileUser:
    properties:
      address:
        type: string
      created_at:
        type: string
      email:
        type: string
      fullname:
        type: string
      id:
        type: integer
      image:
        type: string
      phone:
        type: string
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  models.RecommendedProductInfo:
    properties:
      base_price:
        type: number
      category_id:
        type: integer
      created_at:
        type: string
      description:
        type: string
      id:
        type: integer
      images:
        items:
          $ref: '#/definitions/models.ProductImage'
        type: array
      sizes:
        items:
          $ref: '#/definitions/models.Size'
        type: array
      stock:
        type: integer
      title:
        type: string
      updated_at:
        type: string
      variant:
        $ref: '#/definitions/models.Variant'
    type: object
  models.ResetPasswordRequest:
    properties:
      password:
        minLength: 6
        type: string
      token:
        type: string
    required:
    - password
    - token
    type: object
  models.Response:
    properties:
      data: {}
      message:
        type: string
      success:
        type: boolean
    type: object
  models.Size:
    properties:
      additional_price:
        type: number
      id:
        type: integer
      name:
        type: string
    type: object
  models.TransactionItemDetail:
    properties:
      base_price:
        type: number
      discount_price:
        type: number
      id:
        type: integer
      image:
        type: string
      name:
        type: string
      quantity:
        type: integer
      size:
        type: string
      subtotal:
        type: number
      variant:
        type: string
    type: object
  models.UserLogin:
    properties:
      email:
        type: string
      password:
        type: string
    required:
    - email
    - password
    type: object
  models.UserResponse:
    properties:
      created_at:
        type: string
      email:
        type: string
      fullname:
        type: string
      id:
        type: integer
      role:
        type: string
      token:
        type: string
      updated_at:
        type: string
    type: object
  models.Variant:
    properties:
      additional_price:
        type: integer
      id:
        type: integer
      name:
        type: string
    type: object
  models.VerifyOTPRequest:
    properties:
      email:
        type: string
      otp:
        type: string
    required:
    - email
    - otp
    type: object
host: coffeeder-backend.vercel.app
info:
  contact: {}
  description: API for Coffee Shop Application
  title: Coffee Shop API
  version: "1.0"
paths:
  /admin/categories:
    get:
      consumes:
      - application/json
      description: Mengambil daftar semua kategori
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get all categories
      tags:
      - Categories
    post:
      consumes:
      - application/json
      description: Menambahkan kategori baru
      parameters:
      - description: Category name
        in: body
        name: name
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Create category
      tags:
      - Categories
  /admin/categories/{id}:
    delete:
      consumes:
      - application/json
      description: Menghapus kategori berdasarkan ID
      parameters:
      - description: Category ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Delete category
      tags:
      - Categories
    get:
      consumes:
      - application/json
      description: Mengambil kategori berdasarkan ID
      parameters:
      - description: Category ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get category by ID
      tags:
      - Categories
    patch:
      consumes:
      - application/json
      description: Mengupdate kategori berdasarkan ID
      parameters:
      - description: Category ID
        in: path
        name: id
        required: true
        type: integer
      - description: Category name
        in: body
        name: name
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Update category
      tags:
      - Categories
  /admin/products:
    get:
      consumes:
      - application/json
      description: Get paginated products list with search, sorting, and filtering
        options. Includes images, sizes, and variants.
      parameters:
      - description: Search by title or description
        in: query
        name: search
        type: string
      - default: 10
        description: Number of products per page
        in: query
        name: limit
        type: integer
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: created_at
        description: Sort field (id, title, base_price, created_at)
        in: query
        name: sort_by
        type: string
      - default: DESC
        description: Sort order (ASC or DESC)
        in: query
        name: order
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/models.Response'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get list of products
      tags:
      - Products
    post:
      consumes:
      - multipart/form-data
      description: Create a new product with multiple variants, sizes, and images
      parameters:
      - description: Product Title
        in: formData
        name: title
        required: true
        type: string
      - description: Product Description
        in: formData
        name: description
        type: string
      - description: Base Price
        in: formData
        name: base_price
        required: true
        type: number
      - description: Stock
        in: formData
        name: stock
        required: true
        type: integer
      - description: Category ID
        in: formData
        name: category_id
        required: true
        type: integer
      - description: 'Comma-separated Variant IDs (example: 1,2,3)'
        in: formData
        name: variant_ids
        type: string
      - description: 'Comma-separated Size IDs (example: 1,3)'
        in: formData
        name: sizes
        type: string
      - description: Upload product image (repeat for multiple)
        in: formData
        name: images
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Create a new product
      tags:
      - Products
  /admin/products/{id}:
    delete:
      consumes:
      - application/json
      description: Menghapus product berdasarkan ID
      parameters:
      - description: Product ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Delete a product
      tags:
      - Products
    patch:
      consumes:
      - multipart/form-data
      description: Update product details including title, description, price, stock,
        category, variants, sizes, and images
      parameters:
      - description: Product ID
        in: path
        name: id
        required: true
        type: integer
      - description: Product title
        in: formData
        name: title
        required: true
        type: string
      - description: Product description
        in: formData
        name: description
        type: string
      - description: Product base price
        in: formData
        name: base_price
        required: true
        type: number
      - description: Product stock
        in: formData
        name: stock
        required: true
        type: integer
      - description: Category ID
        in: formData
        name: category_id
        required: true
        type: integer
      - collectionFormat: csv
        description: Variant IDs (array)
        in: formData
        items:
          type: integer
        name: variant_id
        type: array
      - collectionFormat: csv
        description: Size IDs (array)
        in: formData
        items:
          type: integer
        name: sizes
        type: array
      - description: Product images
        in: formData
        name: images
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: Product updated successfully
          schema:
            allOf:
            - $ref: '#/definitions/models.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.ProductResponse'
              type: object
        "400":
          description: Invalid request or product ID
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Failed to update product
          schema:
            $ref: '#/definitions/models.Response'
      summary: Update a product
      tags:
      - Products
  /admin/transactions:
    get:
      consumes:
      - application/json
      description: Mengambil daftar semua transaksi dengan pagination, search, dan
        sort (Admin Only)
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Limit per page
        in: query
        name: limit
        type: integer
      - description: Search by user fullname or invoice number
        in: query
        name: search
        type: string
      - default: '"created_at"'
        description: Sort by column e.g. created_at, total
        in: query
        name: sort
        type: string
      - default: '"desc"'
        description: Sort order asc or desc
        in: query
        name: order
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get all transactions
      tags:
      - Transactions
  /admin/transactions/{id}:
    delete:
      consumes:
      - application/json
      description: Admin dapat menghapus transaksi beserta items terkait
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Delete transaction
      tags:
      - Transactions
    get:
      consumes:
      - application/json
      description: Mengambil detail transaksi berdasarkan ID (Admin Only)
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get transaction by ID
      tags:
      - Transactions
  /admin/transactions/{id}/status:
    patch:
      consumes:
      - application/json
      description: Admin dapat mengupdate status transaksi berdasarkan ID
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: integer
      - description: StatusID payload
        in: body
        name: body
        required: true
        schema:
          additionalProperties:
            type: integer
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Update transaction status
      tags:
      - Transactions
  /admin/users:
    get:
      consumes:
      - application/json
      description: Mengambil daftar users dengan pagination, optional search, dan
        sort
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Limit per page
        in: query
        name: limit
        type: integer
      - description: Search by fullname or email
        in: query
        name: search
        type: string
      - default: created_at
        description: Sort by field (fullname, email, created_at)
        in: query
        name: sort_by
        type: string
      - default: desc
        description: Sort order (asc or desc)
        in: query
        name: sort_order
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get list of users
      tags:
      - Users
    post:
      consumes:
      - multipart/form-data
      description: Menambahkan user baru beserta profile dengan upload gambar
      parameters:
      - description: Full Name
        in: formData
        name: fullname
        required: true
        type: string
      - description: Email
        in: formData
        name: email
        required: true
        type: string
      - description: Password
        in: formData
        name: password
        required: true
        type: string
      - description: User Role (admin/user)
        in: formData
        name: role
        required: true
        type: string
      - description: Phone number
        in: formData
        name: phone
        type: string
      - description: Address
        in: formData
        name: address
        type: string
      - description: Profile Image (max 2MB, jpg/png only)
        in: formData
        name: image
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Create a new user
      tags:
      - Users
  /admin/users/{id}:
    delete:
      consumes:
      - application/json
      description: Menghapus user beserta profile berdasarkan ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Delete a user
      tags:
      - Users
    get:
      consumes:
      - application/json
      description: Mengambil detail user beserta profile berdasarkan ID (Admin Only)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get user by ID
      tags:
      - Users
    patch:
      consumes:
      - multipart/form-data
      description: Mengupdate data user dan profil berdasarkan ID (support upload
        image)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: Full Name
        in: formData
        name: fullname
        type: string
      - description: Email
        in: formData
        name: email
        type: string
      - description: Password (optional)
        in: formData
        name: password
        type: string
      - description: Phone number
        in: formData
        name: phone
        type: string
      - description: Address
        in: formData
        name: address
        type: string
      - description: Profile image (max 2MB, jpg/png only)
        in: formData
        name: image
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Update user data
      tags:
      - Users
  /auth/forgot-password:
    post:
      consumes:
      - application/json
      description: Generate OTP for user to forgot password
      parameters:
      - description: Email for forgot password
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.ForgotPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Request password
      tags:
      - Auth
  /auth/login:
    post:
      consumes:
      - application/json
      description: Login using email and password
      parameters:
      - description: Login Payload
        in: body
        name: login
        required: true
        schema:
          $ref: '#/definitions/models.UserLogin'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/models.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: User login
      tags:
      - Auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: Create a new user account. If role is "admin", response message
        will indicate admin registration success.
      parameters:
      - description: Login Payload
        in: body
        name: login
        required: true
        schema:
          $ref: '#/definitions/models.UserLogin'
      produces:
      - application/json
      responses:
        "201":
          description: User or Admin registered successfully
          schema:
            allOf:
            - $ref: '#/definitions/models.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.UserResponse'
              type: object
        "400":
          description: Invalid request body or password too short
          schema:
            $ref: '#/definitions/models.Response'
        "409":
          description: Email already registered
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Register a new user or admin
      tags:
      - Auth
  /auth/reset-password:
    patch:
      consumes:
      - application/json
      description: Reset user password using OTP token
      parameters:
      - description: Reset password payload
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Reset password
      tags:
      - Auth
  /auth/verify-otp:
    post:
      consumes:
      - application/json
      description: Verify OTP sent to user's email
      parameters:
      - description: OTP verification payload
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.VerifyOTPRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.Response'
      summary: Verify OTP
      tags:
      - Auth
  /cart:
    get:
      description: Retrieve all items in the authenticated user's cart.
      produces:
      - application/json
      responses:
        "200":
          description: Cart fetched successfully
          schema:
            allOf:
            - $ref: '#/definitions/models.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.CartItemResponse'
                  type: array
              type: object
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/models.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Failed to fetch cart
          schema:
            $ref: '#/definitions/models.Response'
      security:
      - ApiKeyAuth: []
      summary: Get user's cart
      tags:
      - Cart
    post:
      consumes:
      - application/json
      description: Add or update multiple items in user's cart. If item exists, quantity
        will be updated.
      parameters:
      - description: List of cart items
        in: body
        name: carts
        required: true
        schema:
          items:
            $ref: '#/definitions/models.Cart'
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: Items added successfully
          schema:
            allOf:
            - $ref: '#/definitions/models.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.CartItemResponse'
                  type: array
              type: object
        "400":
          description: Invalid request or stock not enough
          schema:
            $ref: '#/definitions/models.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.Response'
      security:
      - ApiKeyAuth: []
      summary: Add items to cart
      tags:
      - Cart
  /favorite-product:
    get:
      consumes:
      - application/json
      description: Menampilkan daftar produk favorit (bisa diatur limit-nya lewat
        query param ?limit=5)
      parameters:
      - default: 10
        description: Limit produk favorit yang ditampilkan
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get favorite products
      tags:
      - Products
  /history:
    get:
      consumes:
      - application/json
      description: Fetch transaction history for authenticated user. Supports filter
        by status, month, pagination, and limit.
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - default: on progress
        description: Transaction status filter
        in: query
        name: status
        type: string
      - default: 0
        description: Month filter (1-12)
        in: query
        name: month
        type: integer
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 5
        description: Limit per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses: {}
      summary: Get user transaction history
      tags:
      - Transactions
  /history/{id}:
    get:
      consumes:
      - application/json
      description: Fetch detailed information of a single transaction including items
        for the authenticated user
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Transaction detail fetched successfully
          schema:
            allOf:
            - $ref: '#/definitions/models.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.HistoryDetail'
              type: object
        "400":
          description: Invalid user ID or transaction ID
          schema:
            $ref: '#/definitions/models.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.Response'
      security:
      - ApiKeyAuth: []
      summary: Get detail of a user's transaction by ID
      tags:
      - Transactions
  /product/{id}/images:
    get:
      consumes:
      - application/json
      description: Mengambil semua gambar dari product berdasarkan product ID
      parameters:
      - description: Product ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get all images of a product
      tags:
      - Products
  /product/{id}/images/{image_id}:
    delete:
      consumes:
      - application/json
      description: Menghapus gambar product berdasarkan product ID dan image ID
      parameters:
      - description: Product ID
        in: path
        name: id
        required: true
        type: integer
      - description: Image ID
        in: path
        name: image_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Delete a product image
      tags:
      - Products
    get:
      consumes:
      - application/json
      description: Mengambil satu gambar dari product berdasarkan product ID dan image
        ID
      parameters:
      - description: Product ID
        in: path
        name: id
        required: true
        type: integer
      - description: Image ID
        in: path
        name: image_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get a single image of a product
      tags:
      - Products
    patch:
      consumes:
      - multipart/form-data
      description: Mengupdate / mengganti file gambar product berdasarkan product
        ID dan image ID
      parameters:
      - description: Product ID
        in: path
        name: id
        required: true
        type: integer
      - description: Image ID
        in: path
        name: image_id
        required: true
        type: integer
      - description: New product image file (jpg/png, max 2MB)
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Update a product image
      tags:
      - Products
  /products:
    get:
      consumes:
      - application/json
      description: Endpoint ini mengambil daftar produk berdasarkan kategori, favorit,
        rentang harga, dan urutan (sort by). Semua parameter opsional.
      parameters:
      - collectionFormat: multi
        description: ID kategori, bisa lebih dari satu
        in: query
        items:
          type: integer
        name: cat
        type: array
      - description: Filter produk favorit
        example: true
        in: query
        name: favorite
        type: boolean
      - description: Batas harga minimum
        example: 10000
        in: query
        name: price_min
        type: number
      - description: Batas harga maksimum
        example: 50000
        in: query
        name: price_max
        type: number
      - description: 'Urutkan hasil: name=A-Z, baseprice=termurah ke termahal'
        enum:
        - name
        - baseprice
        example: baseprice
        in: query
        name: sortby
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Data produk berhasil difilter
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Terjadi kesalahan server
          schema:
            additionalProperties: true
            type: object
      summary: Filter dan ambil daftar produk
      tags:
      - Products
  /products/{id}:
    get:
      description: Returns detailed information of a product including images, sizes,
        and recommended products
      parameters:
      - description: Product ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.ProductDetail'
        "400":
          description: Invalid product ID
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Product not found
          schema:
            additionalProperties: true
            type: object
      summary: Get product detail by ID
      tags:
      - Products
  /profile:
    get:
      consumes:
      - application/json
      description: Get profile info for the logged-in user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.ProfileUser'
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get current user's profile
      tags:
      - Profile
    patch:
      consumes:
      - multipart/form-data
      description: Update phone, address, and profile image
      parameters:
      - description: Bearer <JWT token>
        in: header
        name: Authorization
        required: true
        type: string
      - description: Phone number
        in: formData
        name: phone
        type: string
      - description: Address
        in: formData
        name: address
        type: string
      - description: Profile image (jpg, jpeg, png, max 2MB)
        in: formData
        name: image
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.ProfileUser'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update user profile
      tags:
      - Profile
  /transactions:
    post:
      consumes:
      - application/json
      description: Create a transaction for the authenticated user's cart items. User
        profile fields are used if not provided in request.
      parameters:
      - description: Transaction request body
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.OrderTransactionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Transaction created successfully
          schema:
            allOf:
            - $ref: '#/definitions/models.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.OrderTransaction'
              type: object
        "400":
          description: Invalid request or missing user info
          schema:
            $ref: '#/definitions/models.Response'
        "401":
          description: User not authenticated
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Failed to create transaction
          schema:
            $ref: '#/definitions/models.Response'
      security:
      - ApiKeyAuth: []
      summary: Create a new transaction
      tags:
      - Transaction
schemes:
- https
swagger: "2.0"
